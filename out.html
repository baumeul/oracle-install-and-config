<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Oracle</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="mein.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="centos-7.2---oracle-18---apex-18c---jasperserver---tomcat---ords---httpd">CentOS 7.2 - Oracle 18 - APEX 18c - Jasperserver - Tomcat - ORDS - httpd</h1>
<h2 id="centos-installieren">CENTOS INSTALLIEREN</h2>
<p>Here is the first tip - it is a good idea to set up a <em>network connection</em> first, bacause it’ll help a bit with the further installation. Choose <em>Network &amp; Host Name</em> in the menu, toggle the connection On and then click the Configure… button in the right bottom corner, here choose IPv4 Settings tab and now you’re able to choose <strong>DHCP</strong> or add a <strong>static IP address</strong> if needed.</p>
<p>Now the most interesting part - <em>disk partitioning</em>. Click the Installation Destination menu item and select the desired hard disk. If you have only one, it is checked by default. Now I’d recommend you to select I will configure partitioning in order to be able to partition the disk manually. Click Done then.</p>
<p>On the next screen you’re invited to choose your partitioning schema. I prefer clicking the link <em><strong>Click here to create them automatically to pre-create</strong></em> the schema. When you’re done, you see a screen like this one.</p>
<p>The size of the partitions depend on the amount of RAM in your computer and on the size of the hard drive respectively. As you can see, by default CentOS 7 offers you a standard partition type for /boot and an LVM-based root partition, both of xfs filesystem. I’m quite ok with this, but if you like, you can choose a standard partition type for your root partition, or a filesystem, different to xfs (for example, ext4, which is also very reliable). Advantage of using LVM-based partitions is the fact they could be easily extended with another physical drive (your logical drive will be the same) or even shrinked (though not on xfs filesystem, for this you will need, for example, ext4). However, LVM is not supported on a boot partition. The only things that I changed in this standard partitioning schema were the name of the Volume Group and the swap size.</p>
<blockquote>
<p>Note the fact that Oracle Database XE requires <strong>at least 2GB</strong> of swap size and recommends the swap size doubles the size of the RAM available.</p>
</blockquote>
<h3 id="parallels-tools-installieren">PARALLELS TOOLS INSTALLIEREN</h3>
<p>Im Menü <strong><em>Parallels Tools installieren</em></strong> wählen</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource bash numberLines"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="fu">sudo</span> yum install epel-release -y</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="fu">sudo</span> yum install gcc kernel-devel-<span class="va">$(</span><span class="fu">uname</span> -r<span class="va">)</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="fu">sudo</span> yum insstall kernel-headers-<span class="va">$(</span><span class="fu">uname</span> -r<span class="va">)</span> make dkms</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="fu">ssh</span> root@vbnn</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="fu">mkdir</span> /media/cdrom</a>
<a class="sourceLine" id="cb1-6" title="6"><span class="fu">mount</span> /dev/disk/by-label/Parallels<span class="dt">\\</span>x20Tools /media/cdrom</a>
<a class="sourceLine" id="cb1-7" title="7"><span class="ex">/media/cdrom/install</span></a></code></pre></div>
<p>Für VirtualBox lautet der mount-Befehl:</p>
<pre><code>mount /dev/disk/by-label/VBox_GAs_5.2.22 /media/cdrom</code></pre>
<p>und der Aufruf des Installers:</p>
<pre><code>/media/cdrom/VBoxLinuxAdditions.run</code></pre>
<h3 id="vorbereitung-der-installation">VORBEREITUNG DER INSTALLATION</h3>
<h4 id="swap">SWAP</h4>
<p>Oracle verlangt mindestens 2 GB Swap Space.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" title="1"><span class="fu">sudo</span> swapon -s</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="ex">Ausgabe</span>:</a>
<a class="sourceLine" id="cb4-3" title="3"><span class="ex">Filename</span>        Type      Size    Used  Priority</a>
<a class="sourceLine" id="cb4-4" title="4"><span class="ex">/dev/dm-1</span>       partition 6713340 0     -1</a></code></pre></div>
<p>Die VM verfügt über 6 GB Swap. Falls kein Swap oder zuwenig vorhanden ist:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource bash numberLines"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" title="1"><span class="fu">sudo</span> dd if=/dev/zero of=/swapfile count=8192 bs=1M  # 8 GB</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="fu">sudo</span> chmod 600 /swapfile</a>
<a class="sourceLine" id="cb5-3" title="3"><span class="fu">sudo</span> mkswap /swapfile</a>
<a class="sourceLine" id="cb5-4" title="4"><span class="fu">sudo</span> swapon /swapfile</a>
<a class="sourceLine" id="cb5-5" title="5"><span class="fu">sudo</span> vi /etc/fstab</a>
<a class="sourceLine" id="cb5-6" title="6"><span class="ex">---</span> schnipp ---</a>
<a class="sourceLine" id="cb5-7" title="7"><span class="ex">/swapfile</span> none swap 0 0</a>
<a class="sourceLine" id="cb5-8" title="8"><span class="ex">swap</span>  swap  defaults  0 0</a>
<a class="sourceLine" id="cb5-9" title="9"><span class="ex">---</span> schnipp ---</a>
<a class="sourceLine" id="cb5-10" title="10"><span class="fu">sudo</span> swapon -s <span class="co"># Kontrolle</span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="fu">sudo</span> sysctl vm.swapiness=10</a>
<a class="sourceLine" id="cb5-12" title="12"><span class="fu">sudo</span> vi /usr/lib/sysctl.d/00-system-conf</a>
<a class="sourceLine" id="cb5-13" title="13"><span class="ex">---</span> schnipp ---</a>
<a class="sourceLine" id="cb5-14" title="14"><span class="ex">vm.swappiness</span> = 10 <span class="co"># Letzte Zeile</span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="ex">---</span> schnipp ---</a></code></pre></div>
<h4 id="update-os">UPDATE OS</h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" title="1"><span class="fu">ssh</span> root@vbnn</a>
<a class="sourceLine" id="cb6-2" title="2"><span class="ex">yum</span> upgrade -y</a></code></pre></div>
<h4 id="java-und-tools-installieren">JAVA UND TOOLS INSTALLIEREN</h4>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource bash numberLines"><code class="sourceCode bash"><a class="sourceLine" id="cb7-1" title="1"><span class="ex">yum</span> install -y java-1.8.0-openjdk.x86_64 java-1.8.0-openjdk-devel.x86_64</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="ex">yum</span> install -y net-tools htop iotop iftop wget mc</a>
<a class="sourceLine" id="cb7-3" title="3"><span class="ex">yum</span> install -y nano vim libaio bc flex unzip</a>
<a class="sourceLine" id="cb7-4" title="4"><span class="ex">yum</span> install -y rlwrap</a></code></pre></div>
<p>Alternativ das Oracle-JDK installieren.</p>
<pre><code>sudo yum install -y &lt;oracle-jdk.rpm&gt;</code></pre>
<p>A few words about the packages installed:</p>
<ul>
<li><p><em>java-1.8.0-openjdk.x86_64</em> and <em>java-1.8.0-openjdk-devel.x86_64</em> are Java 8 Development Kit packages, which are needed for Tomcat and ORDS to operate.</p>
<blockquote>
<p>Installing Java from official repository using yum should set all the needed environment variables. But you can check it by executing the command java -version and if it works, everything is ok. But if not, then correctly set the $PATH and $JAVA_HOME variables.</p>
</blockquote></li>
<li><strong><code>mc</code> - Midnight Commander</strong> - a really powerful file manager similar to Norton Commander or FAR Manager.</li>
<li><strong><code>net-tools.x86_64</code></strong> - useful and customary network utilites such as ifconfig and netstat. The thing is in CentOS 7 they replaced these usual utilites with ip and ss commands, so to be able to use ifconfig it should be installed manually.</li>
<li><strong><code>htop</code></strong> - a very good alternative to standard top utility. It is much more powerful and can be flexibly configured.</li>
<li><p><strong><code>vim</code></strong> - Enhanced vi Editor.</p></li>
</ul>
<h4 id="ftp-bzw.-copy-installationsdateien">FTP BZW. COPY INSTALLATIONSDATEIEN</h4>
<p>Auf dem Server: <code>mkdir /root/install</code>.</p>
<p>Auf dem Client:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb9-1" title="1"><span class="fu">scp</span> apex_5.1.4.zip root@192.168.178.50:/tmp</a>
<a class="sourceLine" id="cb9-2" title="2"><span class="fu">scp</span> oracle-xe-11.2.0-1.0.x86_64.rpm.zip root@192.168.178.50:/tmp</a>
<a class="sourceLine" id="cb9-3" title="3"><span class="fu">scp</span> TIB_js-jrs-cp_6.4.2_linux_x86_64.run root@192.168.178.50:/tmp</a></code></pre></div>
<p><em>Die folgenden Schritte bis zum Abschnitt Oracle-XE stammen von dsavenko.me <a href="http://dsavenko.me/oracledb-apex-ords-tomcat-httpd-centos7-all-in-one-guide-introduction" class="uri">http://dsavenko.me/oracledb-apex-ords-tomcat-httpd-centos7-all-in-one-guide-introduction</a></em></p>
<h4 id="network-time-synchronization">NETWORK TIME SYNCHRONIZATION</h4>
<p>There’s an utility called chrony for this purpose in the minimal CentOS installation:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb10-1" title="1"><span class="ex">systemctl</span> start chronyd</a>
<a class="sourceLine" id="cb10-2" title="2"><span class="ex">systemctl</span> enable chronyd</a></code></pre></div>
<h4 id="disabling-selinux-on-centos7">DISABLING SELINUX ON CENTOS7</h4>
<p>Now, we need to disable selinux. Its configuration and usage is a topic for a different series of blog posts, so here we’ll just omit all this. Change the value <code>SELINUX=enforcing</code> to <strong><code>SELINUX=disabled</code></strong>. Then save the config file. After doing this, execute <code>setenforce 0</code>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb11-1" title="1"><span class="ex">vim</span> /etc/sysconfig/selinux</a>
<a class="sourceLine" id="cb11-2" title="2"><span class="ex">setenforce</span> 0</a></code></pre></div>
<h4 id="firewall-centos7">FIREWALL CENTOS7</h4>
<p>CentOS 7 uses firewalld as a main firewall service, which is an additional abstraction level above iptables. In many other guides you could see people disabling it and returning to use iptables directly. I don’t know why, maybe because it always hard to pick up something new. And so, I tried, and really liked firewalld ease of configuration (especially in comparison to iptables if you’re new to it). To configure the firewall, we are going to do these things:</p>
<ol type="1">
<li>Add a new service called oracle-db.</li>
<li>Set the new service description and add the port to it.</li>
<li>Enable such services as http, https and oracle-xe for the default zone public.</li>
<li>Reload firewall list of rules on-the-fly.</li>
</ol>
<p>Hilfreiche Kommandos</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource bash numberLines"><code class="sourceCode bash"><a class="sourceLine" id="cb12-1" title="1"><span class="ex">ip</span> a s -- IP-Adresse anzeigen</a>
<a class="sourceLine" id="cb12-2" title="2"><span class="ex">rpm</span> -qa <span class="kw">|</span> <span class="fu">grep</span> firewalld -- Ist Firewall installiert?</a>
<a class="sourceLine" id="cb12-3" title="3"><span class="ex">rpm</span> -qc firewalld -- Konfigurationsdatei für firewalld anzeigen</a>
<a class="sourceLine" id="cb12-4" title="4"><span class="ex">systemctl</span> status firewalld -- Läuft die Firewall?</a>
<a class="sourceLine" id="cb12-5" title="5"><span class="ex">firewall-cmd</span> state -- dto.</a>
<a class="sourceLine" id="cb12-6" title="6"><span class="ex">firewall-cmd</span> --list-all -- Was ist erlaubt?</a>
<a class="sourceLine" id="cb12-7" title="7"><span class="ex">firewall-cmd</span> --get-zones --Zeige Zonen</a>
<a class="sourceLine" id="cb12-8" title="8"><span class="ex">firewall-cmd</span> --get-services --Zeige Services</a>
<a class="sourceLine" id="cb12-9" title="9"></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="co"># Konfiguration Oracle/http/Jasper</span></a>
<a class="sourceLine" id="cb12-11" title="11"><span class="ex">firewall-cmd</span> --permanent --new-service=oracle-db</a>
<a class="sourceLine" id="cb12-12" title="12"><span class="ex">firewall-cmd</span> --permanent --new-service=jasper</a>
<a class="sourceLine" id="cb12-13" title="13"><span class="ex">firewall-cmd</span> --permanent --service=oracle-db --set-short=<span class="st">&quot;Oracle Database Listener&quot;</span> --add-port=1521/tcp</a>
<a class="sourceLine" id="cb12-14" title="14"><span class="ex">firewall-cmd</span> --permanent --service=jasper --set-short=<span class="st">&quot;Jasper Reportserver&quot;</span> --add-port=8081/tcp</a>
<a class="sourceLine" id="cb12-15" title="15"><span class="ex">firewall-cmd</span> --permanent --zone=public --add-service=http</a>
<a class="sourceLine" id="cb12-16" title="16"><span class="ex">firewall-cmd</span> --permanent --zone=public --add-service=https</a>
<a class="sourceLine" id="cb12-17" title="17"><span class="ex">firewall-cmd</span> --permanent --zone=public --add-service=oracle-db</a>
<a class="sourceLine" id="cb12-18" title="18"><span class="ex">firewall-cmd</span> --permanent --zone=public --add-service=jasper</a>
<a class="sourceLine" id="cb12-19" title="19"><span class="ex">firewall-cmd</span> --reload</a></code></pre></div>
<h4 id="ports-direkt-setzen">PORTS DIREKT SETZEN</h4>
<pre><code>firewall-cmd --add-port=1521/tcp
firewall-cmd --add-port=8081/tcp</code></pre>
<h4 id="tomcat-apache-httpd-installation">TOMCAT/ APACHE HTTPD INSTALLATION</h4>
<pre><code>yum install tomcat httpd -y
systemctl start tomcat
systemctl enable tomcat
systemctl start httpd
systemctl enable httpd</code></pre>
<p>That’s it! By now both Tomcat and httpd should work on your system and should listen ports 8080 and 80 respectively on your server. Note the fact that we intentionally didn’t open port 8080 on our server, because we are not going to use it. Instead, httpd will reverse proxy all requests to Tomcat using AJP protocol listener on port 8009.</p>
<blockquote>
<p>You even may disable the HTTP connector on port 8080 in Tomcat’s server.xml config (this is very optional). I will not tell you how to do this, consider it an excercise. Do not forget to restart the Tomcat service afterwards in case you already opened your mc file manager.</p>
</blockquote>
<h2 id="oracle-xe18c-installation">ORACLE-XE18C INSTALLATION</h2>
<pre><code>ssh root@vbnn
# 18c
yum localinstall -y oracle-database-preinstall-18c-1.0-1.el7.x86_64.rpm
yum localinstall -y oracle-database-xe-18c-1.0-1.x86_64.rpm</code></pre>
<p>Notice that I used yum to install the local packages instead of rpm. This will enable us to use all the power of yum in the future if needed (for example, to remove a package with its dependencies).</p>
<p>The user <code>oracle</code> and the group <code>oinstall</code> (not dba as it was previously) are created during the package installation, so we do not need to create them explicitly. Also, the default user environment is created during the set up process (so we do not have to do it expicitly as it was previously). If you like, you can set a password for this user by invoking passwd oracle command. This user is the owner of the <code>/opt/oracle</code> directory where the Oracle Database is located and this must stay unchanged.</p>
<p>Now, when the packages are installed and the user is set up, you need to run the initial database configuration script:</p>
<pre><code>/etc/init.d/oracle-xe-18c configure</code></pre>
<p><strong>Es erfolgt diese Ausgabe:</strong></p>
<pre><code>Specify a password to be used for database accounts. Oracle recommends that the
password entered should be at least 8 characters in length, contain at least 1
uppercase character, 1 lower case character and 1 digit [0-9]. Note that the
same password will be used for SYS, SYSTEM and PDBADMIN accounts:
Confirm the password:
Configuring Oracle Listener.
Listener configuration succeeded.
Configuring Oracle Database XE.
SYS-Benutzerkennwort eingeben:
*******
SYSTEM-Benutzerkennwort eingeben:
******
PDBADMIN-Benutzerkennwort eingeben:
******
DB-Vorgang vorbereiten
7 % abgeschlossen
Datenbankdateien werden kopiert
29 % abgeschlossen
Oracle-Instanz wird erstellt und gestartet
30 % abgeschlossen
31 % abgeschlossen
34 % abgeschlossen
38 % abgeschlossen
41 % abgeschlossen
43 % abgeschlossen
Erstellen von Datenbank wird abgeschlossen
47 % abgeschlossen
50 % abgeschlossen
Integrierbare Datenbanken werden erstellt
54 % abgeschlossen
71 % abgeschlossen
Aktionen nach Abschluss der Konfiguration werden ausgeführt
93 % abgeschlossen
Benutzerdefinierte Skripts werden ausgeführt
100 % abgeschlossen
Erstellen der Datenbank abgeschlossen. Einzelheiten finden Sie in den Logdateien in:
 /opt/oracle/cfgtoollogs/dbca/XE.
Datenbankinformationen:
Globaler Datenbankname:XE
System-ID (SID):XE
Weitere Einzelheiten finden Sie in der Logdatei &quot;/opt/oracle/cfgtoollogs/dbca/XE/XE.log&quot;.

Connect to Oracle Database using one of the connect strings:
     Pluggable database: vb04/XEPDB1
     Multitenant container database: vb04
Use https://localhost:5500/em to access Oracle Enterprise Manager for Oracle Database XE.</code></pre>
<h3 id="setting-the-oracle-environment-variables">SETTING THE ORACLE ENVIRONMENT VARIABLES</h3>
<p>Jetzt die <em>Oracle Database Environment Variablen</em> setzen, so das User komfortabel zugreifen können. Zusätzlich setze ich zwei praktische Aliase:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource bash numberLines"><code class="sourceCode bash"><a class="sourceLine" id="cb18-1" title="1"><span class="bu">echo</span> <span class="st">&#39;# setting oracle database environment variables and aliases&#39;</span> <span class="op">&gt;&gt;</span> /etc/profile.d/oraenv.sh</a>
<a class="sourceLine" id="cb18-2" title="2"><span class="bu">echo</span> <span class="st">&#39;ORACLE_SID=XE&#39;</span> <span class="op">&gt;&gt;</span> /etc/profile.d/oraenv.sh</a>
<a class="sourceLine" id="cb18-3" title="3"><span class="bu">echo</span> <span class="st">&#39;ORAENV_ASK=NO&#39;</span> <span class="op">&gt;&gt;</span> /etc/profile.d/oraenv.sh</a>
<a class="sourceLine" id="cb18-4" title="4"><span class="bu">echo</span> <span class="st">&#39;. /usr/local/bin/oraenv -s&#39;</span> <span class="op">&gt;&gt;</span> /etc/profile.d/oraenv.sh</a>
<a class="sourceLine" id="cb18-5" title="5"><span class="bu">echo</span> <span class="st">&#39;alias sqlplus=&quot;rlwrap sqlplus&quot;&#39;</span> <span class="op">&gt;&gt;</span> /etc/profile.d/oraenv.sh</a>
<a class="sourceLine" id="cb18-6" title="6"><span class="bu">echo</span> <span class="st">&#39;alias rman=&quot;rlwrap rman&quot;&#39;</span> <span class="op">&gt;&gt;</span> /etc/profile.d/oraenv.sh</a>
<a class="sourceLine" id="cb18-7" title="7"><span class="bu">.</span> <span class="ex">/etc/profile.d/oraenv.sh</span></a></code></pre></div>
<p>Automatischer Start für <em>Oracle Database 18c XE service</em>:</p>
<pre><code>systemctl enable oracle-xe-18c</code></pre>
<blockquote>
<p>CentOS7 nutzt <code>systemd</code> anstatt <code>sysconfig</code> um system services zu starten. Deshalb die Services via <code>sysctl</code> starten/stoppen.</p>
</blockquote>
<h3 id="connecting-to-oracle-db">CONNECTING TO ORACLE-DB</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><a class="sourceLine" id="cb20-1" title="1">su <span class="op">-</span> oracle</a>
<a class="sourceLine" id="cb20-2" title="2">lsnrctl status</a>
<a class="sourceLine" id="cb20-3" title="3"><span class="co">-- Container DB (CDB)</span></a>
<a class="sourceLine" id="cb20-4" title="4">sqlplus <span class="kw">system</span><span class="op">/</span>oracle@vbnn<span class="op">/</span>XE</a>
<a class="sourceLine" id="cb20-5" title="5"></a>
<a class="sourceLine" id="cb20-6" title="6"><span class="co">-- Pluggable DB (PDB)</span></a>
<a class="sourceLine" id="cb20-7" title="7">sqlplus <span class="kw">system</span><span class="op">/</span>oracle@vbnn<span class="op">/</span>XEPDB1 # Pluggable DB</a>
<a class="sourceLine" id="cb20-8" title="8"></a>
<a class="sourceLine" id="cb20-9" title="9">sqlplus <span class="op">/</span>nolog</a>
<a class="sourceLine" id="cb20-10" title="10"></a>
<a class="sourceLine" id="cb20-11" title="11"><span class="co">-- connect to the database</span></a>
<a class="sourceLine" id="cb20-12" title="12">SQL<span class="op">&gt;</span> <span class="kw">connect</span> sys <span class="kw">as</span> <span class="kw">sysdba</span></a>
<a class="sourceLine" id="cb20-13" title="13"></a>
<a class="sourceLine" id="cb20-14" title="14"><span class="co">-- basic query to check if everything works</span></a>
<a class="sourceLine" id="cb20-15" title="15">SQL<span class="op">&gt;</span> <span class="kw">select</span> <span class="op">*</span> <span class="kw">from</span> dual;</a>
<a class="sourceLine" id="cb20-16" title="16"></a>
<a class="sourceLine" id="cb20-17" title="17"><span class="co">-- check components and their versions</span></a>
<a class="sourceLine" id="cb20-18" title="18">SQL<span class="op">&gt;</span> <span class="kw">select</span> comp_id, version, status <span class="kw">from</span> dba_registry;</a>
<a class="sourceLine" id="cb20-19" title="19"></a>
<a class="sourceLine" id="cb20-20" title="20">SQL<span class="op">&gt;</span> exit</a></code></pre></div>
<p>That is it! By now we have succesfully installed the XE instance and it is up and running.</p>
<blockquote>
<p>Note that since 12c Oracle Database has multitenant architecture, which means there could be several pluggable databases and one multitenant container database. By default, the XEPDB1 pluggable database is created during the installation of XE.</p>
</blockquote>
<p>To make it easier to connect to the pluggable database, I recommend editing of tnsnames.ora file and add there a new connection descriptor that we are going to use:</p>
<pre><code>sudo vim /opt/oracle/product/18c/dbhomeXE/network/admin/tnsnames.ora</code></pre>
<p>Add this record there below the standard XE record:</p>
<pre><code>PDB1 =
 (DESCRIPTION =
   (ADDRESS = (PROTOCOL = TCP)(HOST = vb04.shared)(PORT = 1521))
   (CONNECT_DATA =
     (SERVER = DEDICATED)
     (SERVICE_NAME = XEPDB1)
   )
)</code></pre>
<p>And save the changes.</p>
<h3 id="startstop">START/STOP</h3>
<p><strong>You can start and stop the database using the <code>/etc/init.d/oracle-xe-18c</code> script.</strong></p>
<p>Execute these commands as <code>root</code> using <code>sudo</code>.</p>
<pre><code>$ sudo -s</code></pre>
<p>Run the following command to <strong>start the listener and database</strong>:</p>
<pre><code>/etc/init.d/oracle-xe-18c start</code></pre>
<p>Run the following command to <strong>stop the database and the listener</strong>:</p>
<pre><code>/etc/init.d/oracle-xe-18c stop</code></pre>
<p>Run the following command to stop and start the listener and database:</p>
<pre><code>/etc/init.d/oracle-xe-18c restart</code></pre>
<p>**You can shut down and start the database using SQL*Plus.**</p>
<p>To shutdown the database, login to the oracle user with its environment variables set for access to the XE database, and issue the following SQL*Plus command:</p>
<pre><code>$ sqlplus / as sysdba
SQL&gt; SHUTDOWN IMMEDIATE</code></pre>
<p>To start the database, issue the commands:</p>
<pre><code>SQL&gt; STARTUP
SQL&gt; ALTER PLUGGABLE DATABASE ALL OPEN;</code></pre>
<p><strong>Automating Shutdown and Startup</strong></p>
<p>Oracle recommends that you configure the system to automatically start Oracle Database when the system starts, and to automatically shut it down when the system shuts down. Automating database shutdown guards against incorrect database shutdown.</p>
<p>To <strong>automate the startup and shutdown</strong> of the listener and database, execute the following commands as <code>root</code>:</p>
<pre><code>$ sudo -s</code></pre>
<h2 id="installation-of-current-version-of-apex-18c">INSTALLATION OF CURRENT VERSION OF APEX 18C</h2>
<p>Previously installation process of the latest version of Oracle Application Express (also known as APEX) consisted of deinstalling of the previous version and then installing of a new version. In 18c Oracle stopped to ship the Express Edition of their RDBMS with APEX preinstalled. So the step to deinstall the preinstalled version od APEX is not needed anymore.</p>
<p>Another difference will be in the fact that we are going to utilize the multitenant architecture of the 18c XE and will be installing our environment into the pluggable database. This enables us to potentially have different versions of APEX installed into different PDBs.</p>
<p>So now the installation process roughly consists of unzipping of the downloaded archive with the freshest version of APEX, connecting to the PDB, running a few installation scripts and then copying static files to your web server directory.</p>
<p>So let’s get it started. Change your directory back to <code>/root/install</code>, unzip the APEX archive and make the user oracle the owner of the directory. Considering we are installing the 18.2 version of APEX, it would look like this:</p>
<pre><code>ssh root@vbnn
cd /root/install # hier liegt das zip-Archiv
mkdir -p /opt/oracle/apex
unzip apex_18.2_en.zip -d /opt/oracle
chown -R oracle:dba /opt/apex
su - oracle
cd /opt/apex/apex
sqlplus sys/oracle@pdb1 as sysdba</code></pre>
<h4 id="installing-a-full-development-environment">INSTALLING A FULL DEVELOPMENT ENVIRONMENT</h4>
<div class="sourceCode" id="cb31"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><a class="sourceLine" id="cb31-1" title="1">SQL<span class="op">&gt;</span> @apexins.sql SYSAUX SYSAUX TEMP <span class="op">/</span>i<span class="op">/</span></a>
<a class="sourceLine" id="cb31-2" title="2">SQL<span class="op">&gt;</span> <span class="kw">select</span> version <span class="kw">from</span> dba_registry <span class="kw">where</span> comp_id<span class="op">=</span><span class="st">&#39;APEX&#39;</span>;</a>
<a class="sourceLine" id="cb31-3" title="3">VERSION</a>
<a class="sourceLine" id="cb31-4" title="4"><span class="co">------------------------------</span></a>
<a class="sourceLine" id="cb31-5" title="5"><span class="dv">18</span>.<span class="dv">2</span>.<span class="dv">0</span>.<span class="fl">00.12</span></a>
<a class="sourceLine" id="cb31-6" title="6"><span class="co">-- creating an instance administrator user and setting a password to them</span></a>
<a class="sourceLine" id="cb31-7" title="7">SQL<span class="op">&gt;</span> @apxchpwd.sql</a>
<a class="sourceLine" id="cb31-8" title="8"><span class="co">-- configure &quot;RESTful Services&quot; (needed to ORDS to serve workspaces and applications static files)</span></a>
<a class="sourceLine" id="cb31-9" title="9">SQL<span class="op">&gt;</span> @apex_rest_config.sql</a>
<a class="sourceLine" id="cb31-10" title="10"><span class="co">-- Install German Language</span></a>
<a class="sourceLine" id="cb31-11" title="11">SQL<span class="op">&gt;</span> @load_trans GERMAN</a>
<a class="sourceLine" id="cb31-12" title="12"><span class="co">-- disable embedded PL/SQL gateways</span></a>
<a class="sourceLine" id="cb31-13" title="13">SQL<span class="op">&gt;</span> <span class="kw">exec</span> dbms_xdb.sethttpport(<span class="dv">0</span>);</a>
<a class="sourceLine" id="cb31-14" title="14">SQL<span class="op">&gt;</span> <span class="kw">exec</span> dbms_xdb.setftpport(<span class="dv">0</span>);</a>
<a class="sourceLine" id="cb31-15" title="15"><span class="co">-- unlocking and setting up APEX public user, this is needed by ORDS to connect to APEX engine</span></a>
<a class="sourceLine" id="cb31-16" title="16">SQL<span class="op">&gt;</span> <span class="kw">alter</span> <span class="fu">user</span> apex_public_user <span class="kw">account</span> <span class="kw">unlock</span>;</a>
<a class="sourceLine" id="cb31-17" title="17">SQL<span class="op">&gt;</span> <span class="kw">alter</span> <span class="fu">user</span> apex_public_user <span class="kw">identified</span> <span class="kw">by</span> <span class="ot">&quot;oracle&quot;</span>;</a>
<a class="sourceLine" id="cb31-18" title="18"><span class="co">-- add ACL to enable outgoing connections for APEX internal user</span></a>
<a class="sourceLine" id="cb31-19" title="19"><span class="co">-- this is needed for the APEX_EXEC and APEX_WEB_SERVICE APIs to function properly</span></a>
<a class="sourceLine" id="cb31-20" title="20"><span class="co">-- change it for a more strict policy if needed</span></a>
<a class="sourceLine" id="cb31-21" title="21">SQL<span class="op">&gt;</span> <span class="cf">begin</span></a>
<a class="sourceLine" id="cb31-22" title="22">     dbms_network_acl_admin.append_host_ace(</a>
<a class="sourceLine" id="cb31-23" title="23">        host <span class="op">=&gt;</span> <span class="st">&#39;*&#39;</span>,</a>
<a class="sourceLine" id="cb31-24" title="24">        ace <span class="op">=&gt;</span> xs$ace_type(</a>
<a class="sourceLine" id="cb31-25" title="25">            privilege_list <span class="op">=&gt;</span> xs$name_list(<span class="st">&#39;connect&#39;</span>),</a>
<a class="sourceLine" id="cb31-26" title="26">            principal_name <span class="op">=&gt;</span> <span class="st">&#39;APEX_180200&#39;</span>,</a>
<a class="sourceLine" id="cb31-27" title="27">            principal_type <span class="op">=&gt;</span> xs_acl.ptype_db))</a>
<a class="sourceLine" id="cb31-28" title="28">        ;</a>
<a class="sourceLine" id="cb31-29" title="29"><span class="cf">end</span>;</a>
<a class="sourceLine" id="cb31-30" title="30"><span class="op">/</span></a>
<a class="sourceLine" id="cb31-31" title="31"><span class="co">-- now disconnect from the database</span></a>
<a class="sourceLine" id="cb31-32" title="32">SQL<span class="op">&gt;</span> exit</a></code></pre></div>
<h4 id="copy-apex-static-files-images-stylesheets-js-files-and-so-on-to-the-web-server-directory">COPY APEX STATIC FILES (IMAGES, STYLESHEETS, JS FILES AND SO ON) TO THE WEB SERVER DIRECTORY</h4>
<pre><code>ssh root@vbnn
mkdir -p /var/www/apex/images
cp -a /opt/oracle/apex/images/. /var/www/apex/images</code></pre>
<p>Now we finished with the <em>Application Express</em> installation.</p>
<h4 id="sessiontimeout">SESSIONTIMEOUT</h4>
<p>Als <code>admin</code> im <code>internal</code> Workspace</p>
<ul>
<li>Maximale Sessiondauer in Sekunden = 28.800 (Standardwert, 8 Stunden)</li>
<li>Maximale Session-Leerlaufzeit in Sekunden = 10.800 (Standardwert 3.660 = Eine Stunde)</li>
</ul>
<h2 id="installation-of-ords">INSTALLATION OF ORDS</h2>
<p>The <em>Oracle Rest Data Services</em> (ORDS) installation consists of unzipping the downloaded archive, running the configuration command, and then deploying the <code>ords.war</code> file into the Tomcat webapps folder.</p>
<p>Change back your directory to <code>/root</code> and unzip the ORDS archive:</p>
<pre><code>ssh root@vbnn
cd /root/install
mkdir -p /opt/oracle/ords</code></pre>
<p>Run the ORDS configuration command before deployment. Choose the advanced mode - in this case the installation process will be interactive:</p>
<pre><code>unzip ords-18.*.zip -d /opt/oracle/ords
cd /opt/oracle/ords
java -jar ords.war install advanced</code></pre>
<p><strong>HINWEIS: Es darf keine “<em>einfaches</em>” Passwort (z.B. oracle) vewendet werden.</strong></p>
<p>When prompted for ORDS configuration directory (the first question), enter <strong><code>config</code></strong>. Then provide the connection info to your pluggable database (specify XEPDB1 for the service name).</p>
<blockquote>
<p>Note that we specified <code>XEPDB1</code> here, not <code>PDB1</code>, because ORDS needs the service name, not your TNSNAMES entry by default to connect to your database. However, when you complete the installation, you can change ORDS settings to use TNS as the connection method. Find out how in the official documentation.</p>
</blockquote>
<blockquote>
<p>Note that “RESTful Services” are required by APEX 5 and above, so enable this by specifying passwords for the APEX_LISTENER and APEX_REST_PUBLIC_USER when prompted.</p>
</blockquote>
<p>The Tomcat user (created as part of Tomcat install) must have write access to the /config/ folder:</p>
<pre><code>chown -R tomcat:tomcat /opt/ords/config</code></pre>
<p>Now it’s high time to deploy ORDS to Tomcat application server. Copy the <code>ords.war</code> into the Tomcat webapps directory for this (and we will restart the Tomcat service later):</p>
<pre><code>cp -a /opt/oracle/ords/ords.war /usr/share/tomcat/webapps/</code></pre>
<p>Done! We succeded in installing of ORDS and deploying it to Tomcat by now. Only one step is left.</p>
<p><strong>Installation validieren</strong></p>
<pre><code>java -jar ords.war validate [--database &lt;dbname&gt;]</code></pre>
<p><strong>ORDS löschen/reinstallieren</strong></p>
<pre><code>java -jar ords.war uninstall</code></pre>
<h3 id="configuration-of-apache-httpd-to-map-http-requests-to-ords">Configuration of Apache httpd to map HTTP-requests to ORDS</h3>
<p>Create the <code>10-apex.conf</code> file in the <code>/etc/httpd/conf.d/</code> directory</p>
<p>The last, but not the least step in this part of the guide is to configure <em>Apache httpd</em> to map HTTP-requests to <em>ORDS</em> and therefore <em>APEX</em> engine.</p>
<p>For this, add a custom httpd configuration file. By default, every <code>.conf</code> file placed in the <code>etc/httpd/conf.d/</code> directory is read by <em>httpd</em> as an additional configuration file to the main <code>/etc/httpd/conf/httpd.conf</code> config file.</p>
<blockquote>
<p>Note that these additional config files are read and processed by httpd in alphabetical order, so name your custom config accordingly if you use multiple config files.</p>
</blockquote>
<p>So, let’s create the <code>10-apex.conf</code> file in the <code>etc/httpd/conf.d/</code> directory with the contents as below:</p>
<pre><code>    vim /etc/httpd/conf.d/10-apex.conf</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode numberSource bash numberLines"><code class="sourceCode bash"><a class="sourceLine" id="cb40-1" title="1"><span class="ex">---</span> schnipp ---</a>
<a class="sourceLine" id="cb40-2" title="2"><span class="co"># additional apache httpd configuration for apex requests proxying</span></a>
<a class="sourceLine" id="cb40-3" title="3"><span class="co"># add this to the end of /etc/httpd/conf/httpd.conf</span></a>
<a class="sourceLine" id="cb40-4" title="4"><span class="co"># or put it in a separate file such as /etc/httpd/conf.d/10-apex.conf</span></a>
<a class="sourceLine" id="cb40-5" title="5"></a>
<a class="sourceLine" id="cb40-6" title="6"><span class="co"># forward ORDS requests to tomcat</span></a>
<a class="sourceLine" id="cb40-7" title="7"><span class="op">&lt;</span><span class="ex">VirtualHost</span> *:<span class="op">80&gt;</span></a>
<a class="sourceLine" id="cb40-8" title="8">    <span class="co"># uncomment the lines below if you plan to serve different domains</span></a>
<a class="sourceLine" id="cb40-9" title="9">    <span class="co"># on this web server, don&#39;t forget to change the domain name</span></a>
<a class="sourceLine" id="cb40-10" title="10">    <span class="co"># ServerName yourdomain.tld</span></a>
<a class="sourceLine" id="cb40-11" title="11">    <span class="co"># ServerAlias www.yourdomain.tld</span></a>
<a class="sourceLine" id="cb40-12" title="12"></a>
<a class="sourceLine" id="cb40-13" title="13">    <span class="co"># alias for apex image files</span></a>
<a class="sourceLine" id="cb40-14" title="14">    <span class="ex">Alias</span> <span class="st">&quot;/i&quot;</span> <span class="st">&quot;/var/www/apex/images/&quot;</span></a>
<a class="sourceLine" id="cb40-15" title="15"></a>
<a class="sourceLine" id="cb40-16" title="16">    <span class="co"># uncomment the line below if you want</span></a>
<a class="sourceLine" id="cb40-17" title="17">    <span class="co"># to redirect traffic to ORDS from root path</span></a>
<a class="sourceLine" id="cb40-18" title="18">    <span class="co"># RedirectMatch permanent &quot;^/$&quot; &quot;/ords&quot;</span></a>
<a class="sourceLine" id="cb40-19" title="19"></a>
<a class="sourceLine" id="cb40-20" title="20">    <span class="co"># proxy ORDS requests to tomcat</span></a>
<a class="sourceLine" id="cb40-21" title="21">    <span class="ex">ProxyRequests</span> off</a>
<a class="sourceLine" id="cb40-22" title="22">    <span class="op">&lt;</span><span class="ex">Location</span> <span class="st">&quot;/ords&quot;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb40-23" title="23">        <span class="ex">ProxyPass</span> <span class="st">&quot;ajp://localhost:8009/ords&quot;</span></a>
<a class="sourceLine" id="cb40-24" title="24">        <span class="ex">ProxyPassReverse</span> <span class="st">&quot;ajp://localhost:8009/ords&quot;</span></a>
<a class="sourceLine" id="cb40-25" title="25">    <span class="op">&lt;</span>/<span class="ex">Location</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb40-26" title="26"><span class="op">&lt;</span>/<span class="ex">VirtualHost</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb40-27" title="27"><span class="ex">---</span> schnipp ---</a></code></pre></div>
<p>Now you are ready to save the configuration file and restart the services.</p>
<p><strong>Restarting the services</strong></p>
<pre><code>systemctl restart httpd
systemctl restart tomcat</code></pre>
<p>And finally, you’re ready to access APEX from your web browser using a link like <a href="http://yourdomain.tld/ords" class="uri">http://yourdomain.tld/ords</a> (or <a href="http://yourdomain.tld" class="uri">http://yourdomain.tld</a> in case you switched on force redirection), where yourdomain.tld is the domain name or the IP-address of your server.</p>
<p>You’re ready to access APEX from your web browser using a link like <a href="http://vbnn/ords" class="uri">http://vbnn/ords</a></p>
<h2 id="apache-httpd-tweaks">APACHE HTTPD TWEAKS</h2>
<h3 id="disable-the-default-welcome-page">DISABLE THE DEFAULT WELCOME PAGE</h3>
<pre><code>rm -rf /etc/httpd/conf.d/welcome.conf</code></pre>
<h3 id="add-an-additional-configuration-file-0-extra.conf-in-the-etchttpdconf.d">ADD AN ADDITIONAL CONFIGURATION file 0-extra.conf in the etc/httpd/conf.d/</h3>
<div class="sourceCode" id="cb43"><pre class="sourceCode numberSource bash numberLines"><code class="sourceCode bash"><a class="sourceLine" id="cb43-1" title="1"><span class="ex">vim</span> /etc/httpd/conf.d/0-extra.conf</a>
<a class="sourceLine" id="cb43-2" title="2"><span class="ex">------------schnipp--------------------</span></a>
<a class="sourceLine" id="cb43-3" title="3"><span class="co"># additional apache httpd configuration</span></a>
<a class="sourceLine" id="cb43-4" title="4"><span class="co"># add this to the end of /etc/httpd/conf/httpd.conf</span></a>
<a class="sourceLine" id="cb43-5" title="5"><span class="co"># or put it in a separate file such as /etc/httpd/conf.d/0-extra.conf</span></a>
<a class="sourceLine" id="cb43-6" title="6"><span class="co"># disable sensitive version info</span></a>
<a class="sourceLine" id="cb43-7" title="7"><span class="ex">ServerSignature</span> Off</a>
<a class="sourceLine" id="cb43-8" title="8"><span class="ex">ServerTokens</span> Prod</a>
<a class="sourceLine" id="cb43-9" title="9"><span class="co"># enable compression of static content</span></a>
<a class="sourceLine" id="cb43-10" title="10"><span class="op">&lt;</span><span class="ex">IfModule</span> deflate_module<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb43-11" title="11">     <span class="ex">SetOutputFilter</span> DEFLATE</a>
<a class="sourceLine" id="cb43-12" title="12">     <span class="ex">AddOutputFilterByType</span> DEFLATE text/plain text/html text/xml text/css text/javascript</a>
<a class="sourceLine" id="cb43-13" title="13"><span class="op">&lt;</span>/<span class="ex">IfModule</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb43-14" title="14"><span class="co"># enable client caching of static content</span></a>
<a class="sourceLine" id="cb43-15" title="15"><span class="op">&lt;</span><span class="ex">IfModule</span> expires_module<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb43-16" title="16">    <span class="ex">ExpiresActive</span> On</a>
<a class="sourceLine" id="cb43-17" title="17">    <span class="ex">ExpiresByType</span> image/gif <span class="st">&quot;access plus 7 days&quot;</span></a>
<a class="sourceLine" id="cb43-18" title="18">    <span class="ex">ExpiresByType</span> image/jpeg <span class="st">&quot;access plus 7 days&quot;</span></a>
<a class="sourceLine" id="cb43-19" title="19">    <span class="ex">ExpiresByType</span> image/png <span class="st">&quot;access plus 7 days&quot;</span></a>
<a class="sourceLine" id="cb43-20" title="20">    <span class="ex">ExpiresByType</span> text/css <span class="st">&quot;access plus 7 days&quot;</span></a>
<a class="sourceLine" id="cb43-21" title="21">    <span class="ex">ExpiresByType</span> text/javascript <span class="st">&quot;access plus 7 days&quot;</span></a>
<a class="sourceLine" id="cb43-22" title="22">    <span class="ex">ExpiresByType</span> application/javascript <span class="st">&quot;access plus 7 days&quot;</span></a>
<a class="sourceLine" id="cb43-23" title="23">    <span class="ex">ExpiresByType</span> application/x-javascript <span class="st">&quot;access plus 7 days&quot;</span></a>
<a class="sourceLine" id="cb43-24" title="24"><span class="op">&lt;</span>/<span class="ex">IfModule</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb43-25" title="25"><span class="ex">------------schnipp--------------------</span></a></code></pre></div>
<h2 id="tomcat-tweaks">TOMCAT TWEAKS</h2>
<h3 id="edit-the-tomcat-service-systemd-unit-file">EDIT THE TOMCAT SERVICE SYSTEMD UNIT FILE</h3>
<div class="sourceCode" id="cb44"><pre class="sourceCode numberSource bash numberLines"><code class="sourceCode bash"><a class="sourceLine" id="cb44-1" title="1"><span class="ex">vim</span> /usr/lib/systemd/system/tomcat.service</a>
<a class="sourceLine" id="cb44-2" title="2"><span class="ex">------------schnipp-----------------------------------</span></a>
<a class="sourceLine" id="cb44-3" title="3">[<span class="ex">Unit</span>]</a>
<a class="sourceLine" id="cb44-4" title="4"><span class="va">Description=</span>Apache <span class="ex">Tomcat</span> Web Application Container</a>
<a class="sourceLine" id="cb44-5" title="5"><span class="va">After=</span>syslog.target <span class="ex">network.target</span> oracle-xe.service</a>
<a class="sourceLine" id="cb44-6" title="6"><span class="va">Wants=</span>oracle-xe.service</a>
<a class="sourceLine" id="cb44-7" title="7"><span class="ex">------------schnipp-----------------------------------</span></a>
<a class="sourceLine" id="cb44-8" title="8"><span class="ex">systemctl</span> daemon-reload</a></code></pre></div>
<h2 id="oracle-xe-tweaks">ORACLE XE TWEAKS</h2>
<pre><code>-- connect to the database
$ rlwrap / as sysdba</code></pre>
<h3 id="altering-the-default-password-policy">ALTERING THE DEFAULT PASSWORD POLICY</h3>
<div class="sourceCode" id="cb46"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb46-1" title="1"><span class="co">-- altering the default password policy (by default passwords will expire</span></a>
<a class="sourceLine" id="cb46-2" title="2"><span class="co">-- in 180 days)</span></a>
<a class="sourceLine" id="cb46-3" title="3">SQL<span class="op">&gt;</span> <span class="kw">alter</span> <span class="kw">profile</span> <span class="kw">default</span> <span class="kw">limit</span> <span class="kw">password_life_time</span> <span class="kw">unlimited</span>;</a></code></pre></div>
<h3 id="some-recommended-values-for-the-parameters">SOME RECOMMENDED VALUES FOR THE PARAMETERS</h3>
<div class="sourceCode" id="cb47"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><a class="sourceLine" id="cb47-1" title="1">SQL<span class="op">&gt;</span> <span class="kw">alter</span> <span class="kw">system</span> <span class="kw">set</span> sessions<span class="op">=</span><span class="dv">250</span> <span class="kw">scope</span><span class="op">=</span>spfile;</a>
<a class="sourceLine" id="cb47-2" title="2">SQL<span class="op">&gt;</span> <span class="kw">alter</span> <span class="kw">system</span> <span class="kw">set</span> processes<span class="op">=</span><span class="dv">200</span> <span class="kw">scope</span><span class="op">=</span>spfile;</a>
<a class="sourceLine" id="cb47-3" title="3">SQL<span class="op">&gt;</span> <span class="kw">alter</span> <span class="kw">system</span> <span class="kw">set</span> memory_target<span class="op">=</span>1G <span class="kw">scope</span><span class="op">=</span>spfile;</a>
<a class="sourceLine" id="cb47-4" title="4">SQL<span class="op">&gt;</span> <span class="kw">alter</span> <span class="kw">system</span> <span class="kw">set</span> memory_max_target<span class="op">=</span>1G <span class="kw">scope</span><span class="op">=</span>spfile;</a>
<a class="sourceLine" id="cb47-5" title="5">SQL<span class="op">&gt;</span> <span class="kw">alter</span> <span class="kw">system</span> <span class="kw">set</span> job_queue_processes<span class="op">=</span><span class="dv">100</span> <span class="kw">scope</span><span class="op">=</span>spfile;</a></code></pre></div>
<h3 id="creating-a-tablespace-for-our-apex-workspaces">CREATING A TABLESPACE FOR OUR APEX WORKSPACES</h3>
<div class="sourceCode" id="cb48"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb48-1" title="1">SQL<span class="op">&gt;</span> <span class="kw">create</span> <span class="kw">tablespace</span> apex <span class="kw">datafile</span> <span class="st">&#39;/opt/oracle/oradata/XE/apex.dbf&#39;</span></a>
<a class="sourceLine" id="cb48-2" title="2"><span class="kw">size</span> 128M <span class="kw">reuse</span> <span class="kw">autoextend</span> <span class="kw">on</span> <span class="kw">next</span> 8M <span class="kw">maxsize</span> <span class="kw">unlimited</span>;</a></code></pre></div>
<h3 id="creating-a-schema-for-our-apex-workspaces">CREATING A SCHEMA FOR OUR APEX WORKSPACES</h3>
<div class="sourceCode" id="cb49"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><a class="sourceLine" id="cb49-1" title="1"><span class="kw">drop</span> <span class="fu">user</span> <span class="ot">&quot;SN&quot;</span> <span class="kw">CASCADE</span>;</a>
<a class="sourceLine" id="cb49-2" title="2"><span class="kw">create</span> <span class="fu">user</span> sn <span class="kw">identified</span> <span class="kw">by</span> <span class="ot">&quot;oracle&quot;</span></a>
<a class="sourceLine" id="cb49-3" title="3">  <span class="kw">default</span> <span class="kw">tablespace</span> apex <span class="kw">temporary</span> <span class="kw">tablespace</span> temp;</a>
<a class="sourceLine" id="cb49-4" title="4"><span class="kw">alter</span> <span class="fu">user</span> sn <span class="kw">quota</span> <span class="kw">unlimited</span> <span class="kw">on</span> apex;</a>
<a class="sourceLine" id="cb49-5" title="5"><span class="kw">grant</span> <span class="kw">unlimited</span> <span class="kw">tablespace</span> <span class="kw">to</span> sn;</a>
<a class="sourceLine" id="cb49-6" title="6"><span class="kw">grant</span> <span class="kw">create</span> <span class="kw">session</span> <span class="kw">to</span> sn;</a>
<a class="sourceLine" id="cb49-7" title="7"><span class="kw">grant</span> <span class="kw">create</span> <span class="kw">cluster</span> <span class="kw">to</span> sn;</a>
<a class="sourceLine" id="cb49-8" title="8"><span class="kw">grant</span> <span class="kw">create</span> <span class="kw">dimension</span> <span class="kw">to</span> sn;</a>
<a class="sourceLine" id="cb49-9" title="9"><span class="kw">grant</span> <span class="kw">create</span> <span class="kw">indextype</span> <span class="kw">to</span> sn;</a>
<a class="sourceLine" id="cb49-10" title="10"><span class="kw">grant</span> <span class="kw">create</span> job <span class="kw">to</span> sn;</a>
<a class="sourceLine" id="cb49-11" title="11"><span class="kw">grant</span> <span class="kw">create</span> <span class="kw">materialized</span> <span class="kw">view</span> <span class="kw">to</span> sn;</a>
<a class="sourceLine" id="cb49-12" title="12"><span class="kw">grant</span> <span class="kw">create</span> <span class="kw">operator</span> <span class="kw">to</span> sn;</a>
<a class="sourceLine" id="cb49-13" title="13"><span class="kw">grant</span> <span class="kw">create</span> <span class="kw">procedure</span> <span class="kw">to</span> sn;</a>
<a class="sourceLine" id="cb49-14" title="14"><span class="kw">grant</span> <span class="kw">create</span> <span class="kw">sequence</span> <span class="kw">to</span> sn;</a>
<a class="sourceLine" id="cb49-15" title="15"><span class="kw">grant</span> <span class="kw">create</span> <span class="kw">snapshot</span> <span class="kw">to</span> sn;</a>
<a class="sourceLine" id="cb49-16" title="16"><span class="kw">grant</span> <span class="kw">create</span> <span class="kw">synonym</span> <span class="kw">to</span> sn;</a>
<a class="sourceLine" id="cb49-17" title="17"><span class="kw">grant</span> <span class="kw">create</span> <span class="kw">table</span> <span class="kw">to</span> sn;</a>
<a class="sourceLine" id="cb49-18" title="18"><span class="kw">grant</span> <span class="kw">create</span> <span class="kw">trigger</span> <span class="kw">to</span> sn;</a>
<a class="sourceLine" id="cb49-19" title="19"><span class="kw">grant</span> <span class="kw">create</span> <span class="kw">type</span> <span class="kw">to</span> sn;</a>
<a class="sourceLine" id="cb49-20" title="20"><span class="kw">grant</span> <span class="kw">create</span> <span class="kw">view</span> <span class="kw">to</span> sn;</a></code></pre></div>
<div class="sourceCode" id="cb50"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb50-1" title="1"><span class="co">-- restart database</span></a>
<a class="sourceLine" id="cb50-2" title="2">SQL<span class="op">&gt;</span> <span class="kw">shutdown</span> <span class="kw">immediate</span></a>
<a class="sourceLine" id="cb50-3" title="3">SQL<span class="op">&gt;</span> <span class="kw">startup</span></a></code></pre></div>
<h2 id="ords-tweaks">ORDS TWEAKS</h2>
<p><strong>THE DEFAULT CONNECTION POOL SETTINGS IN THE ORDS CONFIGURATION ARE TOO SMALL</strong></p>
<pre><code>vim /u01/ords/config/ords/conf/apex.xml</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode xml"><code class="sourceCode xml"><a class="sourceLine" id="cb52-1" title="1">-------------------------schnipp-------------------------</a>
<a class="sourceLine" id="cb52-2" title="2"><span class="kw">&lt;entry</span><span class="ot"> key=</span><span class="st">&quot;jdbc.InitialLimit&quot;</span><span class="kw">&gt;</span>10<span class="kw">&lt;/entry&gt;</span></a>
<a class="sourceLine" id="cb52-3" title="3"><span class="kw">&lt;entry</span><span class="ot"> key=</span><span class="st">&quot;jdbc.MinLimit&quot;</span><span class="kw">&gt;</span>10<span class="kw">&lt;/entry&gt;</span></a>
<a class="sourceLine" id="cb52-4" title="4"><span class="kw">&lt;entry</span><span class="ot"> key=</span><span class="st">&quot;jdbc.MaxLimit&quot;</span><span class="kw">&gt;</span>60<span class="kw">&lt;/entry&gt;</span></a>
<a class="sourceLine" id="cb52-5" title="5">-------------------------schnipp-------------------------</a></code></pre></div>
<pre><code>systemctl restart tomcat</code></pre>
<h2 id="anmeldung-eines-normalen-benutzer-am-ws">ANMELDUNG EINES NORMALEN BENUTZER AM WS</h2>
<h3 id="plsql-gateway">PL/SQL-Gateway</h3>
<p><a href="http://185.233.105.124:8080/apex/f?p=101:1" class="uri">http://185.233.105.124:8080/apex/f?p=101:1</a></p>
<h3 id="ords">ORDS</h3>
<p><a href="http://185.233.105.124/ords/f?p=101:1" class="uri">http://185.233.105.124/ords/f?p=101:1</a></p>
<h2 id="jasper-reportserver-installation">JASPER REPORTSERVER INSTALLATION</h2>
<p><strong>Anmerkung ORDS/Jasperserver</strong>: ORDS/Oracle läuft mit Tomcat auf Port 8080. Jasperserver (Standardinstallation) läuft mit eigenem Tomcat auf Port 8081. Ports müssen in Firewall freigeben sein: <code>firewall-cmd --add-port=8081/tcp</code> für Jasperserver.</p>
<pre><code>chmod 755 TIB_js-jrs-cp_6.4.2_linux_x86_64.run
./TIB_js-jrs-cp_6.4.2_linux_x86_64.run    # Die Defaultwerte verwenden
cd /tmp
/opt/jasperreports-server-cp-6.4.2/ctlscript.sh start</code></pre>
<h3 id="firewall">Firewall</h3>
<pre><code>firewall-cmd --permanent --new-service=jasper
firewall-cmd --permanent --service=jasper \
    --set-short=&quot;Jasper Reportserver&quot; --add-port=8081/tcp
firewall-cmd --permanent --zone=public --add-service=jasper
firewall-cmd --reload</code></pre>
<h3 id="zugriff-testen">Zugriff testen</h3>
<p><a href="http://vbnn:8081/jasperserver" class="uri">http://vbnn:8081/jasperserver</a> jasperadmin/jasperadmin</p>
<pre><code>cd /usr/lib/firewalld/services/
cp postgresql.xml jasper.xml
vim jasper.xml</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode xml"><code class="sourceCode xml"><a class="sourceLine" id="cb57-1" title="1">------------------schnipp---------------------------------------</a>
<a class="sourceLine" id="cb57-2" title="2"><span class="kw">&lt;?xml</span> version=&quot;1.0&quot; encoding=&quot;utf-8&quot;<span class="kw">?&gt;</span></a>
<a class="sourceLine" id="cb57-3" title="3"><span class="kw">&lt;service&gt;</span></a>
<a class="sourceLine" id="cb57-4" title="4">  <span class="kw">&lt;short&gt;</span>Jasper<span class="kw">&lt;/short&gt;</span></a>
<a class="sourceLine" id="cb57-5" title="5">  <span class="kw">&lt;description&gt;</span>Jasper Reportsserver<span class="kw">&lt;/description&gt;</span></a>
<a class="sourceLine" id="cb57-6" title="6">  <span class="kw">&lt;port</span><span class="ot"> protocol=</span><span class="st">&quot;tcp&quot;</span><span class="ot"> port=</span><span class="st">&quot;8081&quot;</span><span class="kw">/&gt;</span></a>
<a class="sourceLine" id="cb57-7" title="7"><span class="kw">&lt;/service&gt;</span></a>
<a class="sourceLine" id="cb57-8" title="8">------------------schnipp---------------------------------------</a></code></pre></div>
<pre><code>firewall-cmd --reload</code></pre>
<h3 id="data-source-hinzufügen">Data Source hinzufügen</h3>
<p><em>Data Sources &gt; Resource hinzufügen &gt; Datenquelle</em></p>
<p>Typ: <strong>JDBC-Datenquelle</strong><br />
JDBC-Treiber: <strong>Oracle (oracle.jdbc.OracleDriver)</strong><br />
– Ggf. Treiber hinzufügen… &gt; Datei auswählen &gt; iMac &gt;<br />
Library &gt; JDBC &gt; ojdbc7.jar &gt; Hochladen Host: <strong>localhost</strong><br />
Port: <strong>1521</strong><br />
Dienst: <strong>XE</strong><br />
URL: <strong>jdbc:oracle:thin:@localhost:1521:XE</strong><br />
Benutzername: <strong>sn/oracle</strong></p>
<p><strong>Workspace SN</strong> (StecoNatura) erstellen<br />
<strong>Workspace FW</strong> (Ferienwohnung) erstellen</p>
<h3 id="berechtigungen-für-apex">Berechtigungen für APEX</h3>
<div class="sourceCode" id="cb59"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb59-1" title="1">$ sqlplus <span class="op">/</span> <span class="kw">as</span> <span class="kw">sysdba</span></a>
<a class="sourceLine" id="cb59-2" title="2">SQL<span class="op">&gt;</span> <span class="kw">grant</span> <span class="kw">execute</span> <span class="kw">on</span> utl_inaddr <span class="kw">to</span> sn;</a>
<a class="sourceLine" id="cb59-3" title="3">SQL<span class="op">&gt;</span> <span class="kw">grant</span> <span class="kw">execute</span> <span class="kw">on</span> utl_inaddr <span class="kw">to</span> fw;</a>
<a class="sourceLine" id="cb59-4" title="4">SQL<span class="op">&gt;</span> <span class="kw">grant</span> <span class="kw">execute</span> <span class="kw">on</span> utl_http <span class="kw">to</span> sn;</a>
<a class="sourceLine" id="cb59-5" title="5">SQL<span class="op">&gt;</span> <span class="kw">grant</span> <span class="kw">execute</span> <span class="kw">on</span> utl_http <span class="kw">to</span> fw;</a></code></pre></div>
<h3 id="acl-als-sys-erstellen-für-apex">ACL als SYS erstellen für APEX</h3>
<div class="sourceCode" id="cb60"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb60-1" title="1"><span class="cf">BEGIN</span></a>
<a class="sourceLine" id="cb60-2" title="2">    DBMS_NETWORK_ACL_ADMIN.CREATE_ACL (</a>
<a class="sourceLine" id="cb60-3" title="3">    acl <span class="op">=&gt;</span> <span class="st">&#39;reportserver.xml&#39;</span>,</a>
<a class="sourceLine" id="cb60-4" title="4">    description <span class="op">=&gt;</span> <span class="st">&#39;Jasper Reportserver&#39;</span>,</a>
<a class="sourceLine" id="cb60-5" title="5">    principal <span class="op">=&gt;</span> <span class="st">&#39;SN&#39;</span>,</a>
<a class="sourceLine" id="cb60-6" title="6">    is_grant <span class="op">=&gt;</span>  <span class="kw">TRUE</span>,</a>
<a class="sourceLine" id="cb60-7" title="7">    <span class="kw">privilege</span> <span class="op">=&gt;</span> <span class="st">&#39;connect&#39;</span>);</a>
<a class="sourceLine" id="cb60-8" title="8"><span class="cf">END</span>;</a>
<a class="sourceLine" id="cb60-9" title="9"></a>
<a class="sourceLine" id="cb60-10" title="10"><span class="co">-- ACL dem HOST zuweisen</span></a>
<a class="sourceLine" id="cb60-11" title="11"><span class="cf">BEGIN</span></a>
<a class="sourceLine" id="cb60-12" title="12">    dbms_network_acl_admin.assign_acl(</a>
<a class="sourceLine" id="cb60-13" title="13">    acl <span class="op">=&gt;</span> <span class="st">&#39;reportserver.xml&#39;</span>,</a>
<a class="sourceLine" id="cb60-14" title="14">    host <span class="op">=&gt;</span> <span class="st">&#39;*&#39;</span>,</a>
<a class="sourceLine" id="cb60-15" title="15">    lower_port <span class="op">=&gt;</span> <span class="dv">80</span>,</a>
<a class="sourceLine" id="cb60-16" title="16">    upper_port <span class="op">=&gt;</span> <span class="dv">8888</span>);</a>
<a class="sourceLine" id="cb60-17" title="17"><span class="cf">END</span>;</a>
<a class="sourceLine" id="cb60-18" title="18"><span class="co">-- ACL einem weiteren User zuordnen</span></a>
<a class="sourceLine" id="cb60-19" title="19"><span class="cf">BEGIN</span></a>
<a class="sourceLine" id="cb60-20" title="20">    DBMS_NETWORK_ACL_ADMIN.ADD_PRIVILEGE (</a>
<a class="sourceLine" id="cb60-21" title="21">    acl <span class="op">=&gt;</span> <span class="st">&#39;reportserver.xml&#39;</span>,</a>
<a class="sourceLine" id="cb60-22" title="22">    principal <span class="op">=&gt;</span> <span class="st">&#39;FW&#39;</span>,</a>
<a class="sourceLine" id="cb60-23" title="23">    is_grant <span class="op">=&gt;</span> <span class="kw">TRUE</span>,</a>
<a class="sourceLine" id="cb60-24" title="24">    <span class="kw">privilege</span> <span class="op">=&gt;</span> <span class="st">&#39;connect&#39;</span>);</a>
<a class="sourceLine" id="cb60-25" title="25"><span class="cf">END</span>;</a></code></pre></div>
<h2 id="jaspersoft-studio-ce-6.5.1">JASPERSOFT STUDIO CE 6.5.1</h2>
<p><strong>Repository Explorer</strong></p>
<p><strong>DATA ADAPTER HINZUFÜGEN</strong></p>
<p><em>Data Adapters &gt; Create Data Adapter &gt; Database JDBC Connection</em><br />
Name: <strong>sn@vb01</strong> bzw.** fw@vb01**<br />
JDBC Driver: <strong>oracle.jdbc.driver.OracleDriver</strong><br />
JDBC Url:** jdbc:oracle:thin:@vb01:1521:xe**<br />
Username: <strong>sn</strong> bzw. <strong>fw</strong><br />
Password: xxxx</p>
<p><strong>SERVER HINZUFÜGEN</strong></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Wert</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name:</td>
<td style="text-align: left;"><strong>JasperReports Server</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;">URL:</td>
<td style="text-align: left;"><strong><a href="http://vb01:8081/jasperserver" class="uri">http://vb01:8081/jasperserver</a></strong></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Acount</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Organization: blank</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">User:</td>
<td style="text-align: left;"><strong>jasperadmin</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;">Password:</td>
<td style="text-align: left;"><strong>jasperadmin</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Advanced Settings:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Authentication:</td>
<td style="text-align: left;"><strong>Password</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left;">JasperReports Libray Version:</td>
<td style="text-align: left;"><strong>Same version as server</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;">Workspace Folder:</td>
<td style="text-align: left;"><strong>/SteccoNatura</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Local:</td>
<td style="text-align: left;"><strong>Deutsch(Deutschland)</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;">Time Zone:</td>
<td style="text-align: left;"><strong>Europe/Berlin</strong></td>
</tr>
</tbody>
</table>
<table>
<caption>Eine Linientabelle</caption>
<thead>
<tr class="header">
<th style="text-align: right;">Rechts</th>
<th style="text-align: left;">Links</th>
<th style="text-align: center;">Mittig</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">123</td>
<td style="text-align: left;">abcdefg</td>
<td style="text-align: center;">x</td>
<td>1234</td>
</tr>
<tr class="even">
<td style="text-align: right;">…</td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
<td></td>
</tr>
</tbody>
</table>
</body>
</html>
